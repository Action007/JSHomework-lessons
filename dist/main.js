(()=>{"use strict";(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds"),r=document.querySelectorAll(".span"),c=()=>{const e=(()=>{const e=(new Date("15 august 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}})();t.textContent=e.hours,o.textContent=e.minutes,n.textContent=e.seconds,e.timeRemaining>0?(t.textContent<10&&(t.textContent="0"+t.textContent),o.textContent<10&&(o.textContent="0"+o.textContent),n.textContent<10&&(n.textContent="0"+n.textContent)):(clearInterval(l),t.textContent="00",o.textContent="00",n.textContent="00",t.style.color="red",o.style.color="red",n.style.color="red",r.forEach((e=>{e.style.color="red"})))},l=setInterval(c,1e3);c()})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu");let o=()=>{t.classList.toggle("active-menu")};e.addEventListener("click",(e=>{let n=e.target;n.classList.contains("close-btn")||n.closest("menu>ul>li")||n.closest(".menu")?o():"active-menu"===t.classList.value&&(n=n.closest("menu"),n||o())}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn");let o=e=>{let t=()=>{0!=+e.style.opacity?(e.style.opacity=+e.style.opacity-.1,setTimeout(t,16)):e.style.display="none"};t()};t.forEach((t=>{t.addEventListener("click",(()=>{(e=>{if(e.style.display="block",screen.width>768){e.style.opacity="0";let t=()=>{e.style.opacity=+e.style.opacity+.1,+e.style.opacity<1&&setTimeout(t,16)};t()}})(e)}))})),e.addEventListener("click",(t=>{let n=t.target;n.classList.contains("popup-close")?o(e):(n=n.closest(".popup-content"),n||o(e))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,r)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelector('a[href="#service-block"]'),t=document.getElementById("service-block"),o=document.querySelectorAll("menu>ul>li>a");e.addEventListener("click",(e=>{e.preventDefault(),t.scrollIntoView({behavior:"smooth",block:"start"})})),o.forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("href").substring(1),n=document.getElementById(o);t.preventDefault(),n.scrollIntoView({behavior:"smooth",block:"start"})}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let n,r=document.querySelectorAll(".dot"),c=0;const l=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},a=()=>{l(e,c,"portfolio-item-active"),l(r,c,"dot-active"),c++,c>=e.length&&(c=0),s(e,c,"portfolio-item-active"),s(r,c,"dot-active")},i=(e=1500)=>{n=setInterval(a,e)};o.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn, .dot")&&(l(e,c,"portfolio-item-active"),l(r,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),s(e,c,"portfolio-item-active"),s(r,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),o.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),(()=>{r.forEach((e=>{e.parentNode.removeChild(e)}));for(let o=0;o<e.length;o++){let e=document.createElement("li");e.classList="dot",0===o&&e.classList.add("dot-active"),t.append(e)}r=document.querySelectorAll(".dot")})(),i(1500)})(),(()=>{const e=document.querySelectorAll(".command__photo"),t=document.querySelectorAll("input.calc-item"),o=document.querySelectorAll(".form-name"),n=document.querySelectorAll(".form-phone"),r=document.getElementById("form2-message");e.forEach((e=>{e.addEventListener("mouseenter",(e=>{e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=e.target.dataset.img.replace(/a(?=\.jpg)/,"")}))}));const c=e=>{e.target.value=e.target.value.replace(/[^\А-Яа-я ]/,"")},l=e=>{e.target.value=e.target.value.replace(/[^\d-()+]/g,"")};t.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D/g,"")}))})),o.forEach((e=>{e.addEventListener("input",c)})),n.forEach((e=>{e.addEventListener("input",l)})),r.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/[^\А-Яа-я\d'";:_/.{},()?!* ]/,"")}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),l=document.getElementById("total");t.addEventListener("change",(t=>{const s=t.target;(s.matches("select")||s.matches("input"))&&(()=>{let t=0,s=1,a=1;const i=o.options[o.selectedIndex].value;let d=+n.value;r.value>1&&(s+=(r.value-1)/10),c.value&&c.value<5?a*=2:c.value&&c.value<10&&(a*=1.5),i&&d&&(t=e*i*d*s*a),l.textContent=t})()}))})(100),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.getElementById("form3"),n=document.querySelectorAll("input"),r=document.createElement("div"),c=document.createElement("img");r.style.cssText="\n    font-size: 2rem;\n    color: white;";const l=()=>{r.textContent="",c.style.cssText=""},s=e=>{e.appendChild(r),r.textContent="Загрузка...",c.style.cssText="\n      margin-right: 10px;\n      width: 25px;",c.src="images/load2.gif",r.insertBefore(c,r.firstChild);const t=new FormData(e);let o={};t.forEach(((e,t)=>{o[t]=e})),(e=>fetch("./server1.php",{method:"POST",body:JSON.stringify(e)}))(o).then((e=>{if(200!==e.status)throw new Error("status network not 200");n.forEach((e=>{e.value=""})),r.textContent="Спасибо! Скоро мы с вами свяжемся!",c.style.cssText="\n      margin-right: 10px;\n      width: 25px;",c.src="images/success.png",r.insertBefore(c,r.firstChild),setTimeout(l,5e3)})).catch((e=>(e=>{console.error(e),r.textContent="Что-то пошло не так",c.style.cssText="\n      margin-right: 10px;\n      width: 25px;",c.src="images/error.png",r.insertBefore(c,r.firstChild),setTimeout(l,5e3)})(e)))};e.addEventListener("submit",(t=>{t.preventDefault(),s(e)})),t.addEventListener("submit",(e=>{e.preventDefault(),s(t)})),o.addEventListener("submit",(e=>{e.preventDefault(),s(o)}))})()})();